@prefix s-wfc: <http://semantic-machines.com/veda/simple-workflow-cr/> .
@prefix s-wf: <http://semantic-machines.com/veda/simple-workflow/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix v-wf: <http://semantic-machines.com/veda/veda-workflow/> .
@prefix v-s: <http://semantic-machines.com/veda/veda-schema/> .
@prefix v-ui: <http://semantic-machines.com/veda/veda-ui/> .
@prefix td: <http://semantic-machines.com/veda/test-data/> .
@prefix d: <http://semantic-machines.com/veda/veda-data/>.
@prefix cfg: <http://semantic-machines.com/veda/cfg/> .

<http://semantic-machines.com/veda/simple-workflow-cr>
  rdf:type owl:Ontology ;
  rdfs:label "Онтология бизнес процессов"@ru ;
  rdfs:label "Simple workflow ontology"@en ;
  rdfs:isDefinedBy s-wfc: ;
  v-s:loadPriority 21 ;
.


s-wf:cr_car_to_dr a v-wf:Flow;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:belongsTo s-wf:net_complex_route;
  v-wf:flowsInto s-wf:cr_decrease_rights;
  v-wf:predicate "task_result.getValue('result')[0].data == 'false'"^^xsd:string;
.

s-wf:crf_c6_to_s a v-wf:Flow;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:belongsTo s-wf:net_complex_route;
  v-wf:flowsInto s-wf:cr_sign;
  v-wf:predicate "task_result.is_exists_result (task_result) == false || task_result.is_all_executors_taken_decision ('result', newUri ('v-wf:DecisionAgreed')) == true";
.

s-wf:crf_a_to_jp a v-wf:Flow;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:belongsTo s-wf:net_complex_route;
  v-wf:flowsInto s-wf:cr_join_point;
  v-wf:predicate "task_result.is_exists_result (task_result) == true && task_result.is_all_executors_taken_decision ('result', newUri ('v-wf:DecisionApprove')) == false";
.

s-wf:crf_e_to_i2 a v-wf:Flow;
  rdfs:isDefinedBy s-wfc: ;
  rdfs:label ""^^xsd:string;
  v-wf:predicate "true"^^xsd:string;
  v-wf:flowsInto s-wf:cr_instruction2;
.

s-wf:var_informing_recipient
  rdf:type v-wf:VarDefine ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:varDefineName "informing" ;
  rdfs:label "Список информирования"@ru ;
.

s-wf:var_coordinator_1
  rdf:type v-wf:VarDefine ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:varDefineName "coordinatorLevel1" ;
  rdfs:label "Список согласующих 1 уровень"@ru ;
.

s-wf:var_coordinator_2
  rdf:type v-wf:VarDefine ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:varDefineName "coordinatorLevel2" ;
  rdfs:label "Список согласующих 2 уровень"@ru ;
.

s-wf:var_coordinator_3
  rdf:type v-wf:VarDefine ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:varDefineName "coordinatorLevel3" ;
  rdfs:label "Список согласующих 3 уровень"@ru ;
.

s-wf:var_coordinator_4
  rdf:type v-wf:VarDefine ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:varDefineName "coordinatorLevel4" ;
  rdfs:label "Список согласующих 4 уровень"@ru ;
.

s-wf:var_coordinator_5
  rdf:type v-wf:VarDefine ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:varDefineName "coordinatorLevel5" ;
  rdfs:label "Список согласующих 5 уровень"@ru ;
.

s-wf:var_coordinator_6
  rdf:type v-wf:VarDefine ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:varDefineName "coordinatorLevel6" ;
  rdfs:label "Список согласующих 6 уровень"@ru ;
.

s-wf:var_approver
  rdf:type v-wf:VarDefine ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:varDefineName "approver" ;
  rdfs:label "Список утверждающих"@ru ;
.

s-wf:var_executor
  rdf:type v-wf:VarDefine ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:varDefineName "executor" ;
  rdfs:label "Список исполнителей"@ru ;
.

s-wf:var_distribution_recipient
  rdf:type v-wf:VarDefine ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:varDefineName "distribution" ;
  rdfs:label "Список рассылки"@ru ;
.

s-wf:executor_informing
  rdf:type v-wf:ExecutorDefinition ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:executorExpression "get_properties_chain (process.getInputVariable ('startForm_id'), [{$go:'s-wf:ComplexRouteStartForm_informing'}, {$get:'s-wf:SimpleRouteStartForm_participant'}])" ;
.

s-wf:executor_introduction
  rdf:type v-wf:ExecutorDefinition ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:executorExpression "get_properties_chain (process.getInputVariable ('startForm_id'), [{$get:'s-wf:ComplexRouteStartForm_introduction'}])" ;
.

s-wf:executor_coordination1
  rdf:type v-wf:ExecutorDefinition ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:executorExpression "get_properties_chain (process.getInputVariable ('startForm_id'), [{$get:'s-wf:ComplexRouteStartForm_coordination1'}])" ;
.

s-wf:executor_coordination2
  rdf:type v-wf:ExecutorDefinition ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:executorExpression "get_properties_chain (process.getInputVariable ('startForm_id'), [{$get:'s-wf:ComplexRouteStartForm_coordination2'}])" ;
.

s-wf:executor_coordination3
  rdf:type v-wf:ExecutorDefinition ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:executorExpression "get_properties_chain (process.getInputVariable ('startForm_id'), [{$get:'s-wf:ComplexRouteStartForm_coordination3'}])" ;
.

s-wf:executor_coordination4
  rdf:type v-wf:ExecutorDefinition ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:executorExpression "get_properties_chain (process.getInputVariable ('startForm_id'), [{$get:'s-wf:ComplexRouteStartForm_coordination4'}])" ;
.

s-wf:executor_coordination5
  rdf:type v-wf:ExecutorDefinition ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:executorExpression "get_properties_chain (process.getInputVariable ('startForm_id'), [{$get:'s-wf:ComplexRouteStartForm_coordination5'}])" ;
.

s-wf:executor_coordination6
  rdf:type v-wf:ExecutorDefinition ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:executorExpression "get_properties_chain (process.getInputVariable ('startForm_id'), [{$get:'s-wf:ComplexRouteStartForm_coordination6'}])" ;
.

s-wf:executor_sign
  rdf:type v-wf:ExecutorDefinition ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:executorExpression "get_properties_chain (process.getInputVariable ('startForm_id'), [{$get:'s-wf:ComplexRouteStartForm_sign'}])" ;
.

s-wf:executor_approval
  rdf:type v-wf:ExecutorDefinition ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:executorExpression "get_properties_chain (process.getInputVariable ('startForm_id'), [{$get:'s-wf:ComplexRouteStartForm_approval'}])" ;
.

s-wf:executor_instruction
  rdf:type v-wf:ExecutorDefinition ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:executorExpression "get_properties_chain (process.getInputVariable ('startForm_id'), [{$get:'s-wf:ComplexRouteStartForm_instruction'}])" ;
.

s-wf:executor_instruction2
  rdf:type v-wf:ExecutorDefinition ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:executorExpression "get_properties_chain (process.getInputVariable ('startForm_id'), [{$get:'s-wf:ComplexRouteStartForm_instruction2'}])" ;
.

s-wf:executor_instruction3
  rdf:type v-wf:ExecutorDefinition ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:executorExpression "get_properties_chain (process.getInputVariable ('startForm_id'), [{$get:'s-wf:ComplexRouteStartForm_instruction3'}])" ;
.

s-wf:executor_review
  rdf:type v-wf:ExecutorDefinition ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:executorExpression "get_properties_chain (process.getInputVariable ('startForm_id'), [{$get:'s-wf:ComplexRouteStartForm_review'}])" ;
.

s-wf:executor_examination
  rdf:type v-wf:ExecutorDefinition ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:executorExpression "get_properties_chain (process.getInputVariable ('startForm_id'), [{$get:'s-wf:ComplexRouteStartForm_examination'}])" ;
.

s-wf:executor_auto_instruction
  rdf:type v-wf:ExecutorDefinition ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:executorExpression "get_properties_chain (process.getInputVariable ('startForm_id'), [{$get:'s-wf:ComplexRouteStartForm_auto_instruction'}])" ;
.

s-wf:executor_distribution
  rdf:type v-wf:ExecutorDefinition ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:executorExpression "get_properties_chain (process.getInputVariable ('startForm_id'), [{$go:'s-wf:ComplexRouteStartForm_distribution'}, {$get:'s-wf:SimpleRouteStartForm_participant'}])" ;
.
s-wf:executor_4m_PLV_coordinator
  rdf:type v-wf:ExecutorDefinition ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:executorExpression "process.getLocalVariable ('coordinator')" ;
  rdfs:label "Исполнители из local process variable coordinator" ;
.

s-wf:executor_from_coordinator
  rdf:type v-wf:ExecutorDefinition ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:executorExpression "process.getInputVariable ('coordinator')" ;
  rdfs:label "Исполнители из переменной coordinator"@ru ;
.

s-wf:map_coordinator_4_PLV_coordinator
  rdf:type v-wf:Mapping ;
  v-wf:mapToVariable s-wf:var_coordinator ;
  v-wf:mappingExpression  "process.getInputVariable ('coordinator')" ;
  rdfs:label "Coordinator = process.input.coordinator" ;
.

s-wf:map_documentType
  rdf:type v-wf:Mapping ;
  v-wf:mapToVariable s-wf:var_documentType ;
  v-wf:mappingExpression  "task_result.getValue ('res')" ;
  rdfs:label "documentType = task_result.getValue ('res')" ;
.


s-wf:user_task_form_label
  rdf:type v-wf:VarDefine ;
  v-wf:varDefineName "user_task_form_label" ;
  rdfs:label "Наименование формы ответа на задачу"@ru ;
  rdfs:isDefinedBy s-wf: ;
.

s-wf:map_user_task_form_label
  rdf:type v-wf:Mapping ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:mapToVariable s-wf:user_task_form_label ;
  v-wf:mappingExpression  "process.getInputVariable ('user_task_form_label')" ;
  rdfs:label "User_task_form_label=process.user_task_form_label" ;
.

s-wf:map_user_task_form_label_coordination
  rdf:type v-wf:Mapping ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:mapToVariable s-wf:user_task_form_label ;
  v-wf:mappingExpression  "newStr ('Согласовать документ')" ;
  rdfs:label "User_task_form_label=согласование"@ru ;
.

s-wf:map_user_task_form_label_instruction
  rdf:type v-wf:Mapping ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:mapToVariable s-wf:user_task_form_label ;
  v-wf:mappingExpression  "newStr ('Исполнить поручение')" ;
  rdfs:label "User_task_form_label=поручение"@ru ;
.

s-wf:map_user_task_form_label_remake
  rdf:type v-wf:Mapping ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:mapToVariable s-wf:user_task_form_label ;
  v-wf:mappingExpression  "newStr ('Доработать документ')" ;
  rdfs:label "User_task_form_label=доработать"@ru ;
.

s-wf:map_possible_decision_for_instruction
  rdf:type v-wf:Mapping ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:mapToVariable s-wf:possible_decision ;
  v-wf:mappingExpression  "[newUri ('v-wf:DecisionAchieved'), newUri('v-wf:DecisionNotPerformed'), newUri('v-wf:DecisionRedirect')]" ;
  rdfs:label "Варианты ответа для исполнения"^^xsd:string;
.

s-wf:map_coordinator1
  rdf:type v-wf:Mapping ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:mapToVariable s-wf:var_coordinator ;
  v-wf:mappingExpression  "process.getInputVariable ('coordinatorLevel1')" ;
.

s-wf:map_coordinator1_1
  rdf:type v-wf:Mapping ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:mapToVariable s-wf:var_coordination_level ;
  v-wf:mappingExpression  "newStr ('1')" ;
.

s-wf:map_coordinator2
  rdf:type v-wf:Mapping ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:mapToVariable s-wf:var_coordinator ;
  v-wf:mappingExpression  "process.getInputVariable ('coordinatorLevel2')" ;
.

s-wf:map_coordinator2_1
  rdf:type v-wf:Mapping ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:mapToVariable s-wf:var_coordination_level ;
  v-wf:mappingExpression  "newStr ('2')" ;
.

s-wf:map_coordinator3
  rdf:type v-wf:Mapping ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:mapToVariable s-wf:var_coordinator ;
  v-wf:mappingExpression  "process.getInputVariable ('coordinatorLevel3')" ;
.

s-wf:map_coordinator3_1
  rdf:type v-wf:Mapping ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:mapToVariable s-wf:var_coordination_level ;
  v-wf:mappingExpression  "newStr ('3')" ;
.

s-wf:map_coordinator4
  rdf:type v-wf:Mapping ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:mapToVariable s-wf:var_coordinator ;
  v-wf:mappingExpression  "process.getInputVariable ('coordinatorLevel4')" ;
.

s-wf:map_coordinator4_1
  rdf:type v-wf:Mapping ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:mapToVariable s-wf:var_coordination_level ;
  v-wf:mappingExpression  "newStr ('4')" ;
.

s-wf:map_coordinator5
  rdf:type v-wf:Mapping ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:mapToVariable s-wf:var_coordinator ;
  v-wf:mappingExpression  "process.getInputVariable ('coordinatorLevel5')" ;
.

s-wf:map_coordinator5_1
  rdf:type v-wf:Mapping ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:mapToVariable s-wf:var_coordination_level ;
  v-wf:mappingExpression  "newStr ('5')" ;
.

s-wf:map_coordinator6
  rdf:type v-wf:Mapping ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:mapToVariable s-wf:var_coordinator ;
  v-wf:mappingExpression  "process.getInputVariable ('coordinatorLevel6')" ;
.

s-wf:map_coordinator6_1
  rdf:type v-wf:Mapping ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:mapToVariable s-wf:var_coordination_level ;
  v-wf:mappingExpression  "newStr ('6')" ;
.
# ------------- journal ------------------------

s-wf:map_jrn_msg_rd
  rdf:type v-wf:Mapping ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:mapToVariable s-wf:var_journal_msg ;
  v-wf:mappingExpression  "newStr ('права были понижены')" ;
.

s-wf:map_jrn_msg_rd_ev
  rdf:type v-wf:Mapping ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:mapToVariable s-wf:var_journal_ev_type ;
  v-wf:mappingExpression  "newUri ('v-wf:TaskCompleted')" ;
.

s-wf:map_jrn_msg_t3_b
  rdf:type v-wf:Mapping ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:mapToVariable s-wf:var_journal_msg ;
  v-wf:mappingExpression  "get_properties_chain ( process.getExecutor(), [{$get:'s-wf:SimpleRouteStartForm_task_label'}])" ;
.

s-wf:map_jrn_msg_t6_b
  rdf:type v-wf:Mapping ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:mapToVariable s-wf:var_journal_msg ;
  v-wf:mappingExpression  "newStr ('отправлено на подписание')" ;
.

s-wf:map_jrn_msg_t3_b_ev
  rdf:type v-wf:Mapping ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:mapToVariable s-wf:var_journal_ev_type ;
  v-wf:mappingExpression  "newUri ('v-wf:TaskGiven')" ;
.

s-wf:map_jrn_ev_type_4_TaskGiven
  rdf:type v-wf:Mapping ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:mapToVariable s-wf:var_journal_ev_type ;
  v-wf:mappingExpression  "newUri ('v-wf:TaskGiven')" ;
.

s-wf:map_jrn_msg_t3_e
  rdf:type v-wf:Mapping ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:mapToVariable s-wf:var_journal_msg ;
  v-wf:mappingExpression  "newStr ('закончено согласование 1 уровень')" ;
.

s-wf:map_jrn_msg_t6_e
  rdf:type v-wf:Mapping ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:mapToVariable s-wf:var_journal_msg ;
  v-wf:mappingExpression  "newStr ('закончено подписание')" ;
.

s-wf:map_jrn_msg_t3_e_ev
  rdf:type v-wf:Mapping ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:mapToVariable s-wf:var_journal_ev_type ;
  v-wf:mappingExpression  "newUri ('v-wf:TaskCompleted')" ;
.

s-wf:map_jrn_ev_type_4_TaskCompleted
  rdf:type v-wf:Mapping ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:mapToVariable s-wf:var_journal_ev_type ;
  v-wf:mappingExpression  "newUri ('v-wf:TaskCompleted')" ;
.

s-wf:map_jrn_msg_t1e
  rdf:type v-wf:Mapping ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:mapToVariable s-wf:var_journal_msg ;
  v-wf:mappingExpression  "newStr ('процесс запущен')" ;
.

s-wf:map_jrn_msg_t1e_ev
  rdf:type v-wf:Mapping ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:mapToVariable s-wf:var_journal_ev_type ;
  v-wf:mappingExpression  "newUri ('v-wf:ProcessStarted')" ;
.
#----------------------- трансформация для стартовой формы -------------------------------------------------

s-wf:transformation1
  rdf:type v-wf:Transform ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:transformRule s-wf:rul_transform1 ;
  v-wf:transformRule s-wf:rul_transform2 ;
#  v-wf:transformRule s-wf:rul_transform3 ;
  v-wf:transformRule s-wf:rul_transform4_1 ;
  v-wf:transformRule s-wf:rul_transform4_2 ;
  v-wf:transformRule s-wf:rul_transform4_3 ;
  v-wf:transformRule s-wf:rul_transform4_4 ;
  v-wf:transformRule s-wf:rul_transform4_5 ;
  v-wf:transformRule s-wf:rul_transform4_6 ;
#  v-wf:transformRule s-wf:rul_transform5 ;
  v-wf:transformRule s-wf:rul_transform6 ;
  v-wf:transformRule s-wf:rul_transform7 ;
.

s-wf:rul_transform1
  rdf:type v-wf:Rule ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:segregateElement "contentName('v-wf:processedDocument')" ;
  v-wf:aggregate  "putUri ('rdf:type', 'v-wf:Variable')";
  v-wf:aggregate  "putValue ('v-wf:variableValue')";
  v-wf:aggregate  "putString ('v-wf:variableName', 'docId')";
.

s-wf:rul_transform2
  rdf:type v-wf:Rule ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:segregateElement "contentName('v-wf:processInitiator')" ;
  v-wf:aggregate  "putUri ('rdf:type', 'v-wf:Variable')";
  v-wf:aggregate  "putValue ('v-wf:variableValue')";
  v-wf:aggregate  "putString ('v-wf:variableName', 'initiator')";
.

s-wf:rul_transform4_1
  rdf:type v-wf:Rule ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:segregateElement "contentName('s-wf:ComplexRouteStartForm_coordinator1')" ;
  v-wf:aggregate  "putUri ('rdf:type', 'v-wf:Variable')";
  v-wf:aggregate  "putValue ('v-wf:variableValue')";
  v-wf:aggregate  "putString ('v-wf:variableName', 'coordinatorLevel1')";
.

s-wf:rul_transform4_2
  rdf:type v-wf:Rule ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:segregateElement "contentName('s-wf:ComplexRouteStartForm_coordinator2')" ;
  v-wf:aggregate  "putUri ('rdf:type', 'v-wf:Variable')";
  v-wf:aggregate  "putValue ('v-wf:variableValue')";
  v-wf:aggregate  "putString ('v-wf:variableName', 'coordinatorLevel2')";
.

s-wf:rul_transform4_3
  rdf:type v-wf:Rule ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:segregateElement "contentName('s-wf:ComplexRouteStartForm_coordinator3')" ;
  v-wf:aggregate  "putUri ('rdf:type', 'v-wf:Variable')";
  v-wf:aggregate  "putValue ('v-wf:variableValue')";
  v-wf:aggregate  "putString ('v-wf:variableName', 'coordinatorLevel3')";
.

s-wf:rul_transform4_4
  rdf:type v-wf:Rule ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:segregateElement "contentName('s-wf:ComplexRouteStartForm_coordinator4')" ;
  v-wf:aggregate  "putUri ('rdf:type', 'v-wf:Variable')";
  v-wf:aggregate  "putValue ('v-wf:variableValue')";
  v-wf:aggregate  "putString ('v-wf:variableName', 'coordinatorLevel4')";
.

s-wf:rul_transform4_5
  rdf:type v-wf:Rule ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:segregateElement "contentName('s-wf:ComplexRouteStartForm_coordinator5')" ;
  v-wf:aggregate  "putUri ('rdf:type', 'v-wf:Variable')";
  v-wf:aggregate  "putValue ('v-wf:variableValue')";
  v-wf:aggregate  "putString ('v-wf:variableName', 'coordinatorLevel5')";
.

s-wf:rul_transform4_6
  rdf:type v-wf:Rule ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:segregateElement "contentName('s-wf:ComplexRouteStartForm_coordinator6')" ;
  v-wf:aggregate  "putUri ('rdf:type', 'v-wf:Variable')";
  v-wf:aggregate  "putValue ('v-wf:variableValue')";
  v-wf:aggregate  "putString ('v-wf:variableName', 'coordinatorLevel6')";
.

s-wf:rul_transform6
  rdf:type v-wf:Rule ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:segregateElement "contentName('s-wf:ComplexRouteStartForm_reviewer')" ;
  v-wf:aggregate  "putUri ('rdf:type', 'v-wf:Variable')";
  v-wf:aggregate  "putValue ('v-wf:variableValue')";
  v-wf:aggregate  "putString ('v-wf:variableName', 'reviewer')";
.

s-wf:rul_transform7
  rdf:type v-wf:Rule ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:segregateElement "contentName('s-wf:ComplexRouteStartForm_signer')" ;
  v-wf:aggregate  "putUri ('rdf:type', 'v-wf:Variable')";
  v-wf:aggregate  "putValue ('v-wf:variableValue')";
  v-wf:aggregate  "putString ('v-wf:variableName', 'signer')";
.

#--------------------------------------------------------------------------------------

s-wf:tr_refine_form
  rdf:type v-wf:Transform ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:transformRule s-wf:rul_transform21_0 ;
  v-wf:transformRule s-wf:rul_transform21_1 ;
  v-wf:transformRule s-wf:rul_transform21_2 ;
  v-wf:transformRule s-wf:rul_transform21_3 ;
  v-wf:transformRule s-wf:rul_transform21_4 ;
  v-wf:transformRule s-wf:rul_transform21_5 ;
  v-wf:transformRule s-wf:rul_transform21_6 ;
  v-wf:transformRule s-wf:rul_transform21_7 ;
  v-wf:transformRule s-wf:rul_transform21_8 ;
  v-wf:transformRule s-wf:rul_transform21_9 ;
.

s-wf:rul_transform21_0
  rdf:type v-wf:Rule ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:segregateObject "objectContentStrValue ('v-wf:variableName', 'docId')" ;
  v-wf:segregateElement "contentName('v-wf:variableValue')" ;
  v-wf:aggregate  "putUri ('rdf:type', 'v-wf:DecisionForm')";
  v-wf:aggregate  "putUri ('rdf:type', 's-wf:UserTaskForm')";
  v-wf:aggregate  "putValue ('v-wf:onDocument')";
#  v-wf:aggregate  "putExecutor ('v-wf:to')";
  v-wf:aggregate  """
    if ( getUri(get_properties_chain(executor, [{$get: 'rdf:type'}], [executor])) === 'v-s:Appointment' ) {
      putUri ('v-wf:to', getUri(get_properties_chain(executor, [{$get: 'v-s:employee'}], [executor])));
    } else {
      putExecutor ('v-wf:to');
    }
  """;
  v-wf:aggregate  """
    if ( getUri(get_properties_chain(executor, [{$get: 'rdf:type'}], [executor])) === 'v-s:Appointment' ) {
      putUri ('v-wf:to', getUri(get_properties_chain(executor, [{$get: 'v-s:occupation'}], [executor])));
    }
  """;
  v-wf:aggregate  "putWorkOrder ('v-wf:onWorkOrder')";
  v-wf:aggregate   "putBoolean ('v-wf:isCompleted', false)";
  v-wf:aggregate   "putString ('rdfs:label', 'Доработать')";
  v-wf:grouping "1";
.

s-wf:rul_transform21_1
  rdf:type v-wf:Rule ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:segregateObject "objectContentStrValue ('v-wf:variableName', 'initiator')" ;
  v-wf:segregateElement "contentName('v-wf:variableValue')" ;
  v-wf:aggregate  "putValue ('v-wf:from')";
  v-wf:grouping "1";
.

s-wf:rul_transform21_2
  rdf:type v-wf:Rule ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:segregateObject "objectContentStrValue ('v-wf:variableName', 'prevTask')" ;
  v-wf:segregateElement "elementContentStrValue('v-wf:variableValue', 's-wf:cr_c1')" ;
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination1')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionBreak')";
  v-wf:grouping "1";
.

s-wf:rul_transform21_3
  rdf:type v-wf:Rule ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:segregateObject "objectContentStrValue ('v-wf:variableName', 'prevTask')" ;
  v-wf:segregateElement "elementContentStrValue('v-wf:variableValue', 's-wf:cr_c2')" ;
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination1')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination2')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionBreak')";
  v-wf:grouping "1";
.

s-wf:rul_transform21_4
  rdf:type v-wf:Rule ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:segregateObject "objectContentStrValue ('v-wf:variableName', 'prevTask')" ;
  v-wf:segregateElement "elementContentStrValue('v-wf:variableValue', 's-wf:cr_c3')" ;
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination1')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination2')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination3')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionBreak')";
  v-wf:grouping "1";
.

s-wf:rul_transform21_5
  rdf:type v-wf:Rule ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:segregateObject "objectContentStrValue ('v-wf:variableName', 'prevTask')" ;
  v-wf:segregateElement "elementContentStrValue('v-wf:variableValue', 's-wf:cr_c4')" ;
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination1')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination2')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination3')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination4')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionBreak')";
  v-wf:grouping "1";
.

s-wf:rul_transform21_6
  rdf:type v-wf:Rule ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:segregateObject "objectContentStrValue ('v-wf:variableName', 'prevTask')" ;
  v-wf:segregateElement "elementContentStrValue('v-wf:variableValue', 's-wf:cr_c5')" ;
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination1')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination2')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination3')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination4')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination5')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionBreak')";
  v-wf:grouping "1";
.

s-wf:rul_transform21_7
  rdf:type v-wf:Rule ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:segregateObject "objectContentStrValue ('v-wf:variableName', 'prevTask')" ;
  v-wf:segregateElement "elementContentStrValue('v-wf:variableValue', 's-wf:cr_c6')" ;
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination1')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination2')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination3')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination4')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination5')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination6')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionBreak')";
  v-wf:grouping "1";
.

s-wf:rul_transform21_8
  rdf:type v-wf:Rule ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:segregateObject "objectContentStrValue ('v-wf:variableName', 'prevTask')" ;
  v-wf:segregateElement "elementContentStrValue('v-wf:variableValue', 's-wf:cr_sign')" ;
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination1')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination2')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination3')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination4')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination5')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination6')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoSign')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionBreak')";
  v-wf:grouping "1";
.

s-wf:rul_transform21_9
  rdf:type v-wf:Rule ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:segregateObject "objectContentStrValue ('v-wf:variableName', 'prevTask')" ;
  v-wf:segregateElement "elementContentStrValue('v-wf:variableValue', 's-wf:cr_approval')" ;
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination1')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination2')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination3')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination4')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination5')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoCoordination6')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoSign')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionGoApproval')";
  v-wf:aggregate  "putUri ('v-wf:possibleDecisionClass', 'v-wf:DecisionBreak')";
  v-wf:grouping "1";
.

# --- end -------------------------- NET Complex Route ----------------------------------- end ---- #

v-wf:DecisionGoCoordination1
  rdf:type owl:Class ;
  rdfs:subClassOf v-wf:Decision ;
  rdfs:isDefinedBy s-wfc: ;
  rdfs:label "Перейти к этапу согласования 1"@ru ;
  v-ui:hasTemplate v-wf:DecisionTemplate1 ;
.

v-wf:DecisionGoCoordination2
  rdf:type owl:Class ;
  rdfs:subClassOf v-wf:Decision ;
  rdfs:isDefinedBy s-wfc: ;
  rdfs:label "Перейти к этапу согласования 2"@ru ;
  v-ui:hasTemplate v-wf:DecisionTemplate1 ;
.

v-wf:DecisionGoCoordination3
  rdf:type owl:Class ;
  rdfs:subClassOf v-wf:Decision ;
  rdfs:isDefinedBy s-wfc: ;
  rdfs:label "Перейти к этапу согласования 3"@ru ;
  v-ui:hasTemplate v-wf:DecisionTemplate1 ;
.

s-wf:ss2 a v-s:SavedSearch;
  rdfs:isDefinedBy s-wfc: ;
  v-s:author td:RomanKarpov;
  v-s:query "'rdfs:isDefinedBy' == 's-wfc:'"^^xsd:string;
  rdfs:label "Онтология комплексного маршрута монди"^^xsd:string;
  v-s:created "2015-05-23T13:27:18.000Z"^^xsd:dateTime.

#----------------------- трансформация для стартовой формы ПДР -------------------------------------------------

s-wf:transformation2
  rdf:type v-wf:Transform ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:transformRule s-wf:rul_t2_transform1, s-wf:rul_t2_transform2,  s-wf:rul_t2_transform3 ;
.

s-wf:rul_t2_transform1
  rdf:type v-wf:Rule ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:segregateElement "contentName('v-wf:processInitiator')" ;
  v-wf:aggregate  "putUri ('rdf:type', 'v-wf:Variable')";
  v-wf:aggregate  "putValue ('v-wf:variableValue')";
  v-wf:aggregate  "putString ('v-wf:variableName', 'initiator')";
.

s-wf:rul_t2_transform2
  rdf:type v-wf:Rule ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:segregateElement "contentName('v-s:hasChief')" ;
  v-wf:aggregate  "putUri ('rdf:type', 'v-wf:Variable')";
  v-wf:aggregate  "putValue ('v-wf:variableValue')";
  v-wf:aggregate  "putString ('v-wf:variableName', 'signer')";
.

s-wf:rul_t2_transform3
  rdf:type v-wf:Rule ;
  rdfs:isDefinedBy s-wfc: ;
  v-wf:segregateElement "contentName('@')" ;
  v-wf:aggregate  "putUri ('rdf:type', 'v-wf:Variable')";
  v-wf:aggregate  "putValue ('v-wf:variableValue')";
  v-wf:aggregate  "putString ('v-wf:variableName', 'docId')";
.

s-wf:complexRouteStartFormToNet
  rdfs:label "Трансформация из формы комплексного маршрута в Сеть маршрута"^^xsd:string;
  rdf:type v-wf:Transform ;
  v-wf:transformRule s-wf:rul_transform1_complex ;
  v-wf:transformRule s-wf:rul_transform2_complex ;
  v-wf:transformRule s-wf:rul_transform3_complex ;
  rdfs:isDefinedBy s-wf: ;
.

s-wf:rul_transform1_complex
  rdf:type v-wf:Rule ;
  rdfs:isDefinedBy s-wf: ;
  v-wf:segregateElement "contentName('v-wf:processedDocument')" ;
  v-wf:aggregate  "putUri ('rdf:type', 'v-wf:Variable')";
  v-wf:aggregate  "putValue ('v-wf:variableValue')";
  v-wf:aggregate  "putString ('v-wf:variableName', 'docId')";
.

s-wf:rul_transform2_complex
  rdf:type v-wf:Rule ;
  rdfs:isDefinedBy s-wf: ;
  v-wf:segregateElement "contentName('v-s:creator')" ;
  v-wf:aggregate  "putUri ('rdf:type', 'v-wf:Variable')";
  v-wf:aggregate  "putValue ('v-wf:variableValue')";
  v-wf:aggregate  "putString ('v-wf:variableName', 'initiator')";
.

s-wf:rul_transform3_complex
  rdf:type v-wf:Rule ;
  rdfs:isDefinedBy s-wf: ;
  v-wf:segregateElement "contentName('@')" ;
  v-wf:aggregate  "putUri ('rdf:type', 'v-wf:Variable')";
  v-wf:aggregate  "putValue ('v-wf:variableValue')";
  v-wf:aggregate  "putString ('v-wf:variableName', 'startForm_id')";
.

s-wf:map_msg_template_project
  rdf:type v-wf:Mapping ;
  v-wf:mapToVariable s-wf:var_msg_template ;
  v-wf:mappingExpression  "newUri ('m-l:msg-template-optiflow')";
  rdfs:isDefinedBy s-wf: ;
.



